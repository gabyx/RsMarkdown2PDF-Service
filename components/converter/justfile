set positional-arguments
set shell := ["bash", "-cue"]
root_dir := justfile_directory()

build *args:
    cd {{root_dir}} && cargo build "${@:1}"

build-image *args:
    docker build --progress plain "${@:1}" -t "md2pdf-converter:test" -f docker/Dockerfile "{{root_dir}}/.."

watch:
    cd "{{root_dir}}" && cargo watch -x 'build'

format:
    cd "{{root_dir}}" && \
    	docker run -v "$(pwd):/workspace" -w "/workspace" \
    	instrumentisto/rust:nightly-alpine cargo fmt
